<video loop muted autoplay oncanplay="this.play()" onloadedmetadata="this.muted = true" playsinline="" id="bannerVideo">
    <source src="/assets/videos/CONNECTUS-OSCURO-3.mp4" type="video/mp4">
</video>
<div class="container">
    <div fxLayout="row" fxLayoutAlign="center center" [ngStyle]="{'height' : heightContainer }">
        <div fxFlex="100%">
            <a href="/" class="logo">
                <img src="https://site.connectus.global/wp-content/themes/twentytwentyone/assets/images/logo.svg">
            </a>
            <div fxLayout="row" fxLayoutGap="50px">
                <div fxFlex="500px" class="sec-login">
                    <div class="loginLoader" *ngIf="loading">
                        <mat-progress-spinner [diameter]="80" mode="indeterminate" color="primary">
                        </mat-progress-spinner>
                    </div>
                    <div class="cont-form" [ngClass]="{ 'opac' : loading }">
                        <div [ngTemplateOutlet]="loginTemplate" *ngIf="curView === 'login'"></div>
                        <div [ngTemplateOutlet]="registerTemplate" *ngIf="curView === 'register'"></div>
                        <div [ngTemplateOutlet]="recoverPassTemplate" *ngIf="curView === 'recoverpass'"></div>

                    </div>
                </div>
                <div fxFlex="100%">
                    <img src="https://site.connectus.global/wp-content/themes/twentytwentyone/assets/images/fotos_personas.jpg"
                        class="people">
                </div>
            </div>
        </div>
    </div>

</div>
<ng-template #loginTemplate>
    <h1 class="main-text small-mtxt">LOG IN CONNECTUS</h1>
    <div class="form-login">
        <div fxLayout="row wrap" fxLayoutAlign="space-between">
            <div fxFlex="100%">
                <div class="input-form" [ngClass]="{ 'invalid' : loginData.usuarioError }"
                    style="margin-bottom:0px !important">
                    <label>USERNAME OR EMAIL</label>
                    <input type="text" [(ngModel)]="loginData.usuario" (keyup)="restoreValidation('usuarioError', $event)">
                    <span class="alert">{{ loginData.usuarioMsg }}</span>
                </div>
            </div>
            <div fxFlex="100%">
                <div class="input-form" [ngClass]="{ 'invalid' : loginData.claveError }">
                    <label>PASSWORD</label>
                    <input type="password" [(ngModel)]="loginData.clave" (keyup)="restoreValidation('claveError', $event)"
                        maxlength="15">
                    <span class="alert">{{ loginData.claveMsg }}</span>
                </div>
            </div>
        </div>
    </div>
    <div class="alert-message" *ngIf="alertMessage">
        {{ alertMessage }}
    </div>
    <div class="actions-banner">
        <button mat-stroked-button class="btn btn-light-outline md" (click)="changeView('recoverpass')">FORGOT PASSWORD?</button>
        <button mat-stroked-button class="btn btn-light-filled md" (click)="login()">LOGIN</button>
    </div>
    <div class="actions-banner topline">
        <span class="txt-ln">DON'T HAVE AN ACCOUNT YET?</span>
        <button mat-stroked-button class="btn btn-light-filled md" (click)="changeView('register')">CREATE
            ACCOUNT</button>
    </div>
</ng-template>

<ng-template #registerTemplate>
    <h1 class="main-text small-mtxt">REGISTER AND BE PART OF SOMETHING GREAT</h1>
    <form [formGroup]="registerForm">
        <div class="form-login">
            <div fxLayout="row wrap" fxLayoutAlign="space-between">
                <div fxFlex="48%">
                    <div class="input-form" [ngClass]="{ 'invalid' : mf.nombres.errors?.required && mf.nombres.touched }"
                        style="margin-bottom:0px !important">
                        <label>NAME</label>
                        <input type="text" maxlength="50" formControlName="nombres" (keyup)="regRestoreValidation('nombres')">
                        <span class="alert" *ngIf="mf.nombres.errors?.required">Name is required</span>
                    </div>
                </div>
                <div fxFlex="48%">
                    <div class="input-form" [ngClass]="{ 'invalid' : mf.apellidos.errors?.required && mf.apellidos.touched }"
                        style="margin-bottom:0px !important">
                        <label>LAST NAME</label>
                        <input type="text" maxlength="50" formControlName="apellidos" (keyup)="regRestoreValidation('apellidos')">
                        <span class="alert" *ngIf="mf.apellidos.errors?.required">Last Name is required</span>
                    </div>
                </div>
                <div fxFlex="100%">
                    <div class="input-form" [ngClass]="{ 'invalid' : (mf.email.errors?.required && mf.email.touched) || errorCorreo }"
                        style="margin-bottom:0px !important">
                        <label>EMAIL</label>
                        <input type="text" maxlength="200" formControlName="email" (keyup)="regRestoreValidation('email')">
                        <span class="alert" *ngIf="mf.email.errors?.required">Email is required</span>
                        <span class="alert" *ngIf="errorCorreo">Email is invalid</span>

                    </div>
                </div>
                <div fxFlex="48%">
                    <div class="input-form" [ngClass]="{ 'invalid' : mf.usuario.errors?.required && mf.usuario.touched }">
                        <label>USERNAME</label>
                        <input type="text" maxlength="20" formControlName="usuario" (keyup)="regRestoreValidation('usuario')">
                        <span class="alert" *ngIf="mf.usuario.errors?.required">Username is required</span>
                    </div>
                </div>
                <div fxFlex="48%">
                    <div class="input-form" [ngClass]="{ 'invalid' : errorClave }">
                        <label>PASSWORD</label>
                        <input type="password" maxlength="15" formControlName="clave" (keyup)="regRestoreValidation('clave')">
                        <span class="alert" *ngIf="errorClave">
                            The password must contain between 8 and 15 characters
                        </span>
                    </div>
                </div>
            </div>
        </div>
        <div class="alert-message" *ngIf="alertMessageReg">
            {{ alertMessageReg }}
        </div>
    </form>

    <div class="actions-banner">
        <button mat-stroked-button class="btn btn-light-outline md" (click)="changeView('login')">GO TO LOGIN</button>
        <button mat-stroked-button class="btn btn-light-filled md" (click)="save()">REGISTER AND CONNECT</button>
    </div>
</ng-template>

<ng-template #recoverPassTemplate>
        <h1 class="main-text small-mtxt">RECOVER YOUR PASSWORD</h1>
        <div *ngIf="recoverPassData.etapa === 4" class="succrec">
            YOUR PASSWORD HAS BEEN CHANGED SUCCESSFULLY
        </div>
        <div class="form-login" *ngIf="recoverPassData.etapa <= 3">
            <div fxLayout="row wrap" fxLayoutAlign="space-between">
                <div fxFlex="100%" *ngIf="recoverPassData.etapa >= 1">
                    <div class="input-form" [ngClass]="{ 'invalid' : recoverPassData.usuarioError, 'disabled' : recoverPassData.etapa >= 2 }">
                        <label>WRITE YOUR USERNAME OR EMAIL</label>
                        <input type="text" maxlength="200" [disabled]="recoverPassData.etapa >= 2" [(ngModel)]="recoverPassData.usuario" (keyup)="resetInput('usuarioError','usuarioMsg')">
                        <span class="alert" *ngIf="recoverPassData.usuarioError">
                            {{ recoverPassData.usuarioMsg }}
                        </span>
                    </div>
                </div>
                <div fxFlex="100%" *ngIf="recoverPassData.etapa >= 2">
                    <div class="input-form" [ngClass]="{ 'invalid' : recoverPassData.codigoError, 'disabled' : recoverPassData.etapa >= 3  }">
                        <label>WRITE THE VALIDATION CODE SENT TO YOUR EMAIL</label>
                        <input type="password" maxlength="8" [(ngModel)]="recoverPassData.validCode" (keyup)="resetInput('codigoError','codigoMsg')">
                        <span class="alert" *ngIf="recoverPassData.codigoError">
                            {{ recoverPassData.codigoMsg }}
                        </span>
                    </div>
                </div>

                <div fxFlex="48%" *ngIf="recoverPassData.etapa >= 3" style="margin-bottom: 20px;">
                    <div class="input-form" [ngClass]="{ 'invalid' : recoverPassData.claveError  }">
                        <label>NEW PASSWORD</label>
                        <input type="password" maxlength="8" [(ngModel)]="recoverPassData.clave" (keyup)="resetInput('claveError','claveMsg')">
                        <span class="alert" *ngIf="recoverPassData.claveError">
                            {{ recoverPassData.claveMsg }}
                        </span>
                    </div>
                </div>
                <div fxFlex="48%" *ngIf="recoverPassData.etapa >= 3">
                    <div class="input-form" [ngClass]="{ 'invalid' : recoverPassData.cclaveError }">
                        <label>CONFIRM NEW PASSWORD</label>
                        <input type="password" maxlength="8" [(ngModel)]="recoverPassData.confirmarClave">
                        <span class="alert" *ngIf="recoverPassData.cclaveError">
                            {{ recoverPassData.cclaveMsg }}
                        </span>
                    </div>
                </div>
            </div>
        </div>
        <div class="alert-message" *ngIf="alertMessageReg">
            {{ alertMessageReg }}
        </div>

    <div class="actions-banner">
        <button mat-stroked-button class="btn btn-light-outline md" (click)="changeView('login')" >RETURN</button>
        <button mat-stroked-button class="btn btn-light-filled md" (click)="requestPassword(recoverPassData.etapa)" *ngIf="recoverPassData.etapa <= 3">{{ btnRecoverTxt }}</button>
    </div>
</ng-template>